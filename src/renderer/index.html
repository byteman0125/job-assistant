<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Searcher</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Custom Title Bar -->
    <div class="custom-titlebar">
      <div class="titlebar-drag-region">
        <span class="titlebar-title">üîç Job Searcher</span>
      </div>
      <div class="titlebar-controls">
        <button class="titlebar-btn minimize-btn" id="minimizeBtn">‚Äì</button>
        <button class="titlebar-btn maximize-btn" id="maximizeBtn">‚ñ°</button>
        <button class="titlebar-btn close-btn" id="closeBtn">√ó</button>
      </div>
    </div>
    
    <!-- Content Wrapper (Sidebar + Main) -->
    <div class="content-wrapper">
      <!-- Left Navigation Sidebar -->
      <div class="left-nav-sidebar">
        <div class="nav-tabs-vertical">
          <button class="tab-btn-vertical active" data-tab="scraping">
            <span class="tab-icon">üîç</span>
            <span class="tab-label">Scraping</span>
          </button>
          <button class="tab-btn-vertical" data-tab="jobs" id="jobsTabBtn">
            <span class="tab-icon">üìã</span>
            <span class="tab-label">Jobs</span>
            <span id="jobsTabCount" class="tab-count-vertical">0</span>
          </button>
          <button class="tab-btn-vertical" data-tab="profile">
            <span class="tab-icon">üë§</span>
            <span class="tab-label">Profile</span>
          </button>
          <button class="tab-btn-vertical" data-tab="chat">
            <span class="tab-icon">ü§ñ</span>
            <span class="tab-label">AI Chat</span>
          </button>
          <button class="tab-btn-vertical" data-tab="apply">
            <span class="tab-icon">üìù</span>
            <span class="tab-label">Job Apply</span>
          </button>
          <button class="tab-btn-vertical" data-tab="cookies">
            <span class="tab-icon">üç™</span>
            <span class="tab-label">Cookies</span>
          </button>
          <button class="tab-btn-vertical" data-tab="settings">
            <span class="tab-icon">‚öôÔ∏è</span>
            <span class="tab-label">Settings</span>
          </button>
          <button class="tab-btn-vertical" data-tab="bugs" id="bugsTabBtn">
            <span class="tab-icon">üêõ</span>
            <span class="tab-label">Bug Reports</span>
            <span id="bugsTabCount" class="tab-count-vertical">0</span>
          </button>
          <button class="tab-btn-vertical" data-tab="metrics">
            <span class="tab-icon">üìä</span>
            <span class="tab-label">Metrics</span>
          </button>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="main-content">
      <!-- Tab Content -->
      <div class="tab-content">
        <!-- Scraping Tab - NOW FIRST/DEFAULT -->
        <div id="scraping-tab" class="tab-pane active">
          <div class="scraping-viewer">
            <div class="scraping-header">
              <div class="scraping-title-section">
                <h2>üîç Live Scraping View</h2>
                <span id="status" class="status">‚óè Idle</span>
              </div>
              <div class="scraping-controls">
                <span id="todayCount" class="badge">0 jobs today</span>
                <button id="startBtn" class="btn btn-primary">Start Scraping</button>
                <button id="stopBtn" class="btn btn-danger" disabled>Stop Scraping</button>
              </div>
            </div>
            
            <!-- Live Status Display -->
            <div class="live-status">
              <div class="status-row">
                <span class="status-label">Platform:</span>
                <span id="statusPlatform" class="status-value">-</span>
              </div>
              <!-- Thin Progress Bar with Current Step -->
              <div class="progress-container">
                <div class="progress-header">
                  <span id="statusStep" class="progress-current-step">Idle</span>
                  <span id="progressPercentage" class="progress-percentage">0%</span>
                </div>
                <div id="progressBar" class="progress-bar">
                  <div id="progressBarFill" class="progress-bar-fill"></div>
                </div>
                <div class="progress-stats">
                  <span id="progressStats" class="progress-stats-text">0 jobs processed</span>
                  <span id="progressETA" class="progress-eta">--</span>
                </div>
              </div>
            </div>
            
            <!-- Scraping Webview -->
            <div class="webview-container-full">
              <webview id="scrapingView" partition="persist:scraping" src="about:blank" allowpopups useragent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" style="width: 100%; height: 100%; border: 2px solid #4CAF50; border-radius: 4px; background: #1e1e1e;"></webview>
            </div>
          </div>
        </div>
        
        <!-- Jobs Tab -->
        <div id="jobs-tab" class="tab-pane">
          <div class="filters">
            <input type="text" id="searchInput" placeholder="Search jobs..." class="search-input">
            <select id="platformFilter" class="filter-select">
              <option value="">All Platforms</option>
              <option value="Himalayas">Himalayas</option>
              <option value="BuiltIn">BuiltIn</option>
              <option value="ZipRecruiter">ZipRecruiter</option>
              <option value="Jobright">Jobright</option>
              <option value="RemoteOK">RemoteOK</option>
              <option value="WeWorkRemotely">WeWorkRemotely</option>
              <option value="Jungle">Jungle</option>
              <option value="Rocketship">Rocketship</option>
            </select>
            <select id="appliedFilter" class="filter-select">
              <option value="not-applied">Not Applied</option>
              <option value="all">All Jobs</option>
              <option value="applied">Applied Only</option>
            </select>
            <select id="jobTypeFilter" class="filter-select">
              <option value="">All Job Types</option>
              <option value="Backend">Backend</option>
              <option value="Frontend">Frontend</option>
              <option value="Full Stack">Full Stack</option>
              <option value="Mobile">Mobile</option>
              <option value="DevOps">DevOps</option>
              <option value="Data Engineering">Data Engineering</option>
              <option value="Data Science">Data Science</option>
              <option value="QA/Testing">QA/Testing</option>
              <option value="Security">Security</option>
              <option value="Product/Design">Product/Design</option>
              <option value="Other">Other</option>
            </select>
            <select id="industryFilter" class="filter-select">
              <option value="">All Industries</option>
              <option value="Technology/Software">Technology/Software</option>
              <option value="Fintech">Fintech</option>
              <option value="Healthcare">Healthcare</option>
              <option value="E-commerce">E-commerce</option>
              <option value="Gaming">Gaming</option>
              <option value="Education">Education</option>
              <option value="Enterprise">Enterprise</option>
              <option value="Consulting">Consulting</option>
              <option value="Government">Government</option>
              <option value="Media/Entertainment">Media/Entertainment</option>
              <option value="Crypto/Web3">Crypto/Web3</option>
              <option value="Transportation">Transportation</option>
              <option value="Real Estate">Real Estate</option>
              <option value="Social Media">Social Media</option>
              <option value="AI/ML">AI/ML</option>
              <option value="Other">Other</option>
            </select>
            <select id="appliedByFilter" class="filter-select" style="display: none;">
              <option value="">Applied By: All</option>
              <option value="User">User</option>
              <option value="Bot">Bot</option>
              <option value="None">None</option>
            </select>
            <div class="date-picker-button" id="datePickerContainer" style="display: none;">
              <input type="date" id="appliedDate" class="date-input-hidden">
              <button id="datePickerBtn" class="btn-date-picker" title="Filter by Applied Date">üìÖ</button>
              <button id="clearDateBtn" class="btn-clear-date-icon" title="Clear Date" style="display: none;">‚úï</button>
            </div>
            <button id="refreshBtn" class="btn btn-secondary">üîÑ Refresh</button>
          </div>
          
          <div class="bulk-actions">
            <button id="selectAllBtn" class="btn btn-info">‚òëÔ∏è Select All</button>
            <div class="bulk-divider"></div>
            <button id="copySelectedBtn" class="btn btn-success" disabled>üìã Copy Selected</button>
            <button id="deleteSelectedBtn" class="btn btn-danger" disabled>üóëÔ∏è Delete Selected</button>
            <button id="markAppliedBtn" class="btn btn-primary" disabled>‚úì Mark as Applied</button>
            <button id="markNotAppliedBtn" class="btn btn-secondary" disabled>‚úó Mark as Not Applied</button>
            <span id="selectedCount" class="badge">0 selected</span>
          </div>
          
          <div class="table-container">
            <table id="jobsTable" class="jobs-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Company</th>
                  <th>Title</th>
                  <th>Job Type</th>
                  <th>Industry</th>
                  <th>Applied</th>
                  <th>Applied By</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="jobsTableBody">
                <tr>
                  <td colspan="8" class="no-data">No jobs found. Start scraping to find jobs!</td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div class="pagination">
            <button id="prevPageBtn" class="btn btn-secondary" disabled>‚Üê Previous</button>
            <span id="pageInfo" class="page-info">Page 1 of 1</span>
            <select id="pageSize" class="page-size-select">
              <option value="20">20 per page</option>
              <option value="50" selected>50 per page</option>
              <option value="100">100 per page</option>
              <option value="all">Show All</option>
            </select>
            <button id="nextPageBtn" class="btn btn-secondary" disabled>Next ‚Üí</button>
          </div>
        </div>

        <!-- Profile Tab -->
        <!-- Profile Tab Complete Wizard -->
<div id="profile-tab" class="tab-pane">
  <div class="profile-manager">
    <h2>üë§ Your Profile</h2>
    
    <!-- Wizard Progress Steps -->
    <div class="wizard-steps">
      <div class="wizard-step active" data-step="1">
        <div class="step-number">1</div>
        <div class="step-title">Resume</div>
      </div>
      <div class="wizard-step" data-step="2">
        <div class="step-number">2</div>
        <div class="step-title">Personal</div>
      </div>
      <div class="wizard-step" data-step="3">
        <div class="step-number">3</div>
        <div class="step-title">Professional</div>
      </div>
      <div class="wizard-step" data-step="4">
        <div class="step-number">4</div>
        <div class="step-title">Education</div>
      </div>
      <div class="wizard-step" data-step="5">
        <div class="step-number">5</div>
        <div class="step-title">Preferences</div>
      </div>
    </div>

    <!-- Step 1: Multiple Resumes Management -->
    <div class="wizard-page active" data-page="1">
      <div class="profile-section">
        <h3>üìÑ Resume Management</h3>
        <p class="help-text">Add multiple resumes with tech stack labels. AI will automatically select the best resume for each job.</p>
        
        <!-- Add New Resume Form -->
        <div class="resume-add-form">
          <h4>‚ûï Add New Resume</h4>
          <div class="form-grid">
            <div class="form-group full-width">
              <label for="newResumeLabel">Resume Label *</label>
              <input type="text" id="newResumeLabel" class="form-control" placeholder="e.g., Full Stack Developer, Backend Engineer, Frontend Specialist">
              <span class="help-text">AI will analyze your resume and work experience to extract tech stack automatically</span>
            </div>
            
            <div class="form-group full-width">
              <label for="newResumeFile">Resume File *</label>
              <div class="file-input-group">
                <input type="text" id="newResumeFilePath" class="form-control" placeholder="Click Browse to select resume..." readonly>
                <button id="browseNewResumeBtn" class="btn btn-secondary">üìÅ Browse</button>
              </div>
              <span class="help-text">PDF, DOC, DOCX</span>
            </div>
            
            
            <div class="form-group full-width">
              <label class="checkbox-label">
                <input type="checkbox" id="newResumeIsPrimary">
                <span>Set as primary resume (default for all jobs)</span>
              </label>
            </div>
            
            <div class="form-group full-width">
              <h4 style="color: #4CAF50; margin-top: 20px; margin-bottom: 15px;">üíº Work Experience for this Resume</h4>
              <p class="help-text" style="margin-bottom: 15px;">Add work experiences that are highlighted in this resume version.</p>
              
              <!-- Work Experience Mini Form -->
              <div class="work-exp-mini-form" style="background: #252525; border: 1px solid #3d3d3d; border-radius: 6px; padding: 15px; margin-bottom: 15px;">
                <div class="form-grid">
                  <div class="form-group">
                    <label>Company Name</label>
                    <input type="text" id="newExpCompany" class="form-control" placeholder="e.g., ABC Corp">
                  </div>
                  <div class="form-group">
                    <label>Role/Position</label>
                    <input type="text" id="newExpRole" class="form-control" placeholder="e.g., Senior Developer">
                  </div>
                  <div class="form-group">
                    <label>Period</label>
                    <input type="text" id="newExpPeriod" class="form-control" placeholder="e.g., Jan 2020 - Present">
                  </div>
                  <div class="form-group">
                    <label>Field/Domain</label>
                    <input type="text" id="newExpField" class="form-control" placeholder="e.g., Web Development">
                  </div>
                  <div class="form-group full-width">
                    <label>Description/Achievements</label>
                    <textarea id="newExpDescription" class="form-control" rows="2" placeholder="Key responsibilities and achievements..."></textarea>
                  </div>
                </div>
                <button id="addExpToNewResumeBtn" class="btn btn-secondary btn-sm" style="margin-top: 10px;">‚ûï Add Experience</button>
              </div>
              
              <!-- Temporary Experience List -->
              <div id="newResumeExpList" class="new-resume-exp-list"></div>
            </div>
            
            <div class="form-group full-width">
              <button id="addResumeBtn" class="btn btn-success">‚ûï Save Resume</button>
            </div>
          </div>
        </div>

        <!-- Resumes List -->
        <div class="resumes-list">
          <h4>üìö Your Resumes</h4>
          <div id="resumesList" class="resumes-container">
            <p class="empty-state">No resumes added yet. Add your first resume above.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 2: Personal Information -->
    <div class="wizard-page" data-page="2">
      <div class="profile-section">
        <h3>üìù Personal Information</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="profileFirstName">First Name *</label>
            <input type="text" id="profileFirstName" class="form-control" placeholder="John">
          </div>
          <div class="form-group">
            <label for="profileLastName">Last Name *</label>
            <input type="text" id="profileLastName" class="form-control" placeholder="Doe">
          </div>
          <div class="form-group">
            <label for="profileEmail">Email Address *</label>
            <input type="email" id="profileEmail" class="form-control" placeholder="john.doe@example.com">
          </div>
          <div class="form-group">
            <label for="profilePhone">Phone Number</label>
            <input type="tel" id="profilePhone" class="form-control" placeholder="+1 (555) 123-4567">
          </div>
          <div class="form-group">
            <label for="profileLinkedIn">LinkedIn Profile URL</label>
            <input type="url" id="profileLinkedIn" class="form-control" placeholder="https://linkedin.com/in/johndoe">
          </div>
          <div class="form-group">
            <label for="profileGithub">GitHub Profile URL</label>
            <input type="url" id="profileGithub" class="form-control" placeholder="https://github.com/johndoe">
          </div>
          <div class="form-group">
            <label for="profilePortfolio">Portfolio/Website URL</label>
            <input type="url" id="profilePortfolio" class="form-control" placeholder="https://johndoe.com">
          </div>
        </div>
      </div>

      <div class="profile-section">
        <h3>üìç Location</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="profileAddress">Street Address</label>
            <input type="text" id="profileAddress" class="form-control" placeholder="123 Main Street">
          </div>
          <div class="form-group">
            <label for="profileCity">City *</label>
            <input type="text" id="profileCity" class="form-control" placeholder="San Francisco">
          </div>
          <div class="form-group">
            <label for="profileState">State/Province *</label>
            <input type="text" id="profileState" class="form-control" placeholder="CA">
          </div>
          <div class="form-group">
            <label for="profileZipCode">ZIP/Postal Code</label>
            <input type="text" id="profileZipCode" class="form-control" placeholder="94102">
          </div>
          <div class="form-group">
            <label for="profileCountry">Country *</label>
            <input type="text" id="profileCountry" class="form-control" placeholder="United States" value="United States">
          </div>
        </div>
      </div>
    </div>

    <!-- Step 3: Professional Information -->
    <div class="wizard-page" data-page="3">
      <div class="profile-section">
        <h3>üíº Professional Information</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="profileJobTitle">Current/Desired Job Title *</label>
            <input type="text" id="profileJobTitle" class="form-control" placeholder="Senior Full Stack Developer">
          </div>
          <div class="form-group">
            <label for="profileYearsExperience">Years of Experience</label>
            <input type="number" id="profileYearsExperience" class="form-control" placeholder="5" min="0" max="50">
          </div>
          <div class="form-group full-width">
            <label for="profileSkills">Key Skills (comma-separated)</label>
            <textarea id="profileSkills" class="form-control" rows="3" placeholder="JavaScript, React, Node.js, Python, Django, PostgreSQL, AWS, Docker"></textarea>
          </div>
          <div class="form-group full-width">
            <label for="profileSummary">Professional Summary</label>
            <textarea id="profileSummary" class="form-control" rows="4" placeholder="Experienced full-stack developer with 5+ years building scalable web applications..."></textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 4: Education -->
    <div class="wizard-page" data-page="4">
      <div class="profile-section">
        <h3>üéì Education</h3>
        <p class="help-text">Add your education history. Most recent first.</p>
        
        <div id="educationList" class="experience-list"></div>
        
        <button id="addEducationBtn" class="btn btn-secondary">+ Add Education</button>
      </div>
    </div>

    <!-- Step 5: Work Authorization & Preferences -->
    <div class="wizard-page" data-page="5">
      <div class="profile-section">
        <h3>‚úÖ Work Authorization & Preferences</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="profileWorkAuthorization">Work Authorization *</label>
            <select id="profileWorkAuthorization" class="form-control">
              <option value="">Select...</option>
              <option value="us_citizen">US Citizen</option>
              <option value="green_card">Green Card Holder</option>
              <option value="h1b">H1B Visa</option>
              <option value="opt">OPT</option>
              <option value="cpt">CPT</option>
              <option value="ead">EAD</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="profileSponsorshipRequired">Require Visa Sponsorship?</label>
            <select id="profileSponsorshipRequired" class="form-control">
              <option value="no">No</option>
              <option value="yes">Yes</option>
              <option value="future">Yes, in the future</option>
            </select>
          </div>
          <div class="form-group">
            <label for="profileDesiredSalary">Desired Salary (Annual USD)</label>
            <input type="number" id="profileDesiredSalary" class="form-control" placeholder="120000" min="0" step="5000">
          </div>
          <div class="form-group full-width">
            <label>üí∞ Minimum Acceptable Salary (for job filtering)</label>
            <div class="salary-filters-grid">
              <div class="form-group">
                <label for="profileMinSalaryAnnual">Annual ($/year)</label>
                <input type="number" id="profileMinSalaryAnnual" class="form-control" placeholder="120000" min="0" step="5000">
              </div>
              <div class="form-group">
                <label for="profileMinSalaryMonthly">Monthly ($/month)</label>
                <input type="number" id="profileMinSalaryMonthly" class="form-control" placeholder="10000" min="0" step="500">
              </div>
              <div class="form-group">
                <label for="profileMinSalaryHourly">Hourly ($/hour)</label>
                <input type="number" id="profileMinSalaryHourly" class="form-control" placeholder="58" min="0" step="1">
              </div>
            </div>
            <span class="help-text">Jobs with salaries below these thresholds will be automatically skipped. Leave empty to accept all salaries.</span>
          </div>
          <div class="form-group">
            <label for="profileNoticePeriod">Notice Period</label>
            <select id="profileNoticePeriod" class="form-control">
              <option value="immediate">Immediate</option>
              <option value="1_week">1 Week</option>
              <option value="2_weeks">2 Weeks</option>
              <option value="1_month">1 Month</option>
              <option value="2_months">2 Months</option>
              <option value="3_months">3+ Months</option>
            </select>
          </div>
          <div class="form-group">
            <label for="profileWorkType">Preferred Work Type *</label>
            <select id="profileWorkType" class="form-control">
              <option value="remote">Remote Only</option>
              <option value="hybrid">Hybrid</option>
              <option value="onsite">On-site</option>
              <option value="any">Any</option>
            </select>
          </div>
          <div class="form-group">
            <label>Preferred Employment Type</label>
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" id="profileEmploymentFullTime" value="full_time">
                <span>Full-time</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="profileEmploymentContract" value="contract">
                <span>Contract</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="profileEmploymentPartTime" value="part_time">
                <span>Part-time</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="profileEmploymentFreelance" value="freelance">
                <span>Freelance</span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Wizard Navigation -->
    <div class="wizard-nav">
      <button id="wizardPrevBtn" class="btn btn-secondary" style="display: none">‚Üê Previous</button>
      <div style="flex: 1"></div>
      <button id="wizardNextBtn" class="btn btn-primary">Next ‚Üí</button>
    </div>

    <!-- Action Buttons (shown on last page) -->
    <div id="wizardActions" class="form-actions" style="display: none; border-top: 1px solid #3d3d3d; padding-top: 20px; margin-top: 20px">
      <button id="saveProfileBtn" class="btn btn-success">üíæ Save Profile</button>
      <button id="clearProfileBtn" class="btn btn-secondary">üóëÔ∏è Clear All</button>
    </div>

    <div id="profileStatus" class="status-message"></div>
  </div>
</div>

        <!-- AI Chat Tab -->
        <div id="chat-tab" class="tab-pane">
          <div class="chat-container">
            <div class="chat-header">
              <h2>ü§ñ AI Chat with Llama</h2>
              <div class="chat-status">
                <span id="chatStatus" class="status-indicator">‚óè Connecting...</span>
              </div>
            </div>
            
            <div class="chat-messages" id="chatMessages">
              <div class="chat-message ai-message">
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                  <div class="message-text">Hello! I'm your AI assistant powered by Llama. How can I help you today?</div>
                  <div class="message-time" id="chatTime">Just now</div>
                </div>
              </div>
            </div>
            
            <div class="chat-input-container">
              <div class="chat-input-wrapper">
                <textarea id="chatInput" class="chat-input" placeholder="Type your message here..." rows="1"></textarea>
                <button id="chatSendBtn" class="chat-send-btn">Send</button>
              </div>
              <div class="chat-controls">
                <button id="chatClearBtn" class="btn btn-secondary btn-sm">Clear Chat</button>
                <span id="chatTyping" class="typing-indicator">
                  <span class="typing-text">AI is thinking</span>
                  <span class="typing-dots">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </span>
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Cookies Tab -->
        <div id="cookies-tab" class="tab-pane">
          <div class="cookies-manager">
            <h2>Cookie Management</h2>
            <p class="help-text">Manage multiple cookie sets per platform. Cookies are rotated per platform run. Each set is a JSON array: [{"name":"cookie_name","value":"cookie_value"}, ...]</p>
            
            <div class="form-group">
              <div class="cookie-platform-row">
                <label for="cookiePlatform">Platform:</label>
                <select id="cookiePlatform" class="form-control">
                  <option value="Himalayas">Himalayas</option>
                  <option value="BuiltIn">BuiltIn</option>
                  <option value="ZipRecruiter">ZipRecruiter</option>
                  <option value="Jobright">Jobright</option>
                  <option value="RemoteOK">RemoteOK</option>
                  <option value="WeWorkRemotely">WeWorkRemotely</option>
                  <option value="Jungle">Jungle</option>
                  <option value="Rocketship">Rocketship</option>
                </select>
                <button id="addCookieSetBtn" class="btn btn-primary" type="button">+ Add Cookie Set</button>
              </div>
            </div>

            <div class="form-group">
              <label>Cookie Sets (drag to reorder):</label>
              <div id="cookieSetList" class="cookie-set-list">
                <!-- cookie sets will be rendered here -->
              </div>
            </div>

            <div id="cookieEditorSection" class="form-group" style="display: none;">
              <label for="cookieSetLabel">Selected Set Name:</label>
              <input id="cookieSetLabel" class="form-control" type="text" placeholder="Set name (e.g. Set 1)">
              
              <label for="cookieData">Cookie JSON:</label>
              <textarea id="cookieData" class="form-textarea" rows="10" placeholder='[{"name":"session","value":"abc123"},...]'></textarea>
              
              <div class="form-actions">
                <button id="saveCookiesBtn" class="btn btn-primary" type="button">üíæ Save Set</button>
                <button id="loadCookiesBtn" class="btn btn-secondary" type="button">üîÑ Refresh List</button>
                <button id="testCookiesBtn" class="btn btn-info" type="button">üß™ Test JSON</button>
                <button id="migrateCookiesBtn" class="btn btn-warning" type="button">‚¨ÜÔ∏è Migrate Legacy Cookies</button>
              </div>
            </div>

            <div id="cookieStatus" class="status-message"></div>
          </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-pane">
          <div class="settings-manager">
            <h2>‚öôÔ∏è Scraper Settings</h2>
            
            <!-- Job Platforms -->
            <div class="settings-section">
              <h3>üìç Job Platforms</h3>
              <p class="help-text">Drag to reorder platforms. Scraper will follow this sequence.</p>
              <div class="platform-list" id="platformList">
                <!-- Platforms will be dynamically loaded here -->
              </div>
            </div>

            <!-- Ignore Keywords -->
            <div class="settings-section">
              <h3>üö´ Ignore Keywords</h3>
              <p class="help-text">Jobs with these keywords in the title will be auto-skipped and marked as "already applied"</p>
              <div class="keyword-list" id="keywordList"></div>
              <div class="input-group">
                <input type="text" id="newKeyword" placeholder="e.g. Senior, Manager, Java..." class="form-control">
                <button id="addKeywordBtn" class="btn btn-primary">+ Add Keyword</button>
              </div>
            </div>

            <!-- Ignore Domains -->
            <div class="settings-section">
              <h3>üåê Ignore Domains</h3>
              <p class="help-text">Jobs redirecting to these domains will be auto-skipped (defaults: indeed.com, linkedin.com, dice.com)</p>
              <div class="domain-list" id="domainList"></div>
              <div class="input-group">
                <input type="text" id="newDomain" placeholder="e.g. example.com..." class="form-control">
                <button id="addDomainBtn" class="btn btn-primary">+ Add Domain</button>
              </div>
            </div>

            <!-- Google Sheets Integration -->
            <div class="settings-section">
              <h3>üìä Google Sheets Integration</h3>
              <p class="help-text">Automatically save new jobs to Google Sheet after saving to database. Sheet URL: <a href="https://docs.google.com/spreadsheets/d/1hBW6XlTRz5wiFKF3g4FE_aRpGJ4g-DRLRBIynJ0rwMY/edit" target="_blank">View Sheet</a></p>
              
              <div class="form-group">
                <label for="googleSheetsCredentials">Service Account JSON Credentials</label>
                <textarea id="googleSheetsCredentials" class="form-control" rows="8" placeholder='Paste your Service Account JSON here:
{
  "type": "service_account",
  "project_id": "...",
  "private_key_id": "...",
  "private_key": "...",
  "client_email": "...",
  ...
}'></textarea>
                <span class="help-text">Get this from Google Cloud Console ‚Üí IAM & Admin ‚Üí Service Accounts ‚Üí Create Service Account ‚Üí Download JSON key. Then share the Google Sheet with the service account email.</span>
              </div>
              
              <div class="form-group">
                <div class="button-group" style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                  <button id="saveGoogleSheetsCredentialsBtn" class="btn btn-secondary">üíæ Save Credentials</button>
                  <button id="testGoogleSheetsBtn" class="btn btn-info">üîç Test Connection</button>
                  <span id="googleSheetsTestStatus" class="status-message"></span>
                </div>
              </div>
              
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="enableGoogleSheets" checked>
                  <span>Enable Google Sheets sync (saves jobs automatically)</span>
                </label>
              </div>
            </div>

            <div class="form-actions">
              <button id="saveSettingsBtn" class="btn btn-success">üíæ Save All Settings</button>
            </div>

            <div id="settingsStatus" class="status-message"></div>
          </div>
        </div>

        <!-- Bug Reports Tab -->
        <div id="bugs-tab" class="tab-pane">
          <div class="bugs-manager">
            <h2>üêõ Bug Reports</h2>
            <p class="help-text">Automatic bug tracking with deduplication. Review and resolve issues found during scraping.</p>
            
            <!-- Bug Stats -->
            <div class="bug-stats" id="bugStats">
              <!-- Stats will be loaded here -->
            </div>
            
            <!-- Bug Filters -->
            <div class="bug-filters">
              <div class="filter-group">
                <label for="bugPlatformFilter">Platform:</label>
                <select id="bugPlatformFilter" class="form-control">
                  <option value="">All Platforms</option>
                  <option value="Himalayas">Himalayas</option>
                  <option value="Jobright">Jobright</option>
                  <option value="BuiltIn">BuiltIn</option>
                  <option value="ZipRecruiter">ZipRecruiter</option>
                  <option value="RemoteOK">RemoteOK</option>
                  <option value="WeWorkRemotely">WeWorkRemotely</option>
                  <option value="Jungle">Jungle</option>
                  <option value="Rocketship">Rocketship</option>
                </select>
              </div>
              
              <div class="filter-group">
                <label for="bugStatusFilter">Status:</label>
                <select id="bugStatusFilter" class="form-control">
                  <option value="">All Status</option>
                  <option value="open">Open</option>
                  <option value="investigating">Investigating</option>
                  <option value="resolved">Resolved</option>
                  <option value="ignored">Ignored</option>
                </select>
              </div>
              
              <div class="filter-group">
                <label for="bugTypeFilter">Error Type:</label>
                <select id="bugTypeFilter" class="form-control">
                  <option value="">All Types</option>
                  <option value="Processing Error">Processing Error</option>
                  <option value="Scraping Error">Scraping Error</option>
                  <option value="Navigation Error">Navigation Error</option>
                  <option value="GPT Error">GPT Error</option>
                </select>
              </div>
              
              <button id="refreshBugsBtn" class="btn btn-primary">üîÑ Refresh</button>
              <button id="clearAllBugsBtn" class="btn btn-danger">üóëÔ∏è Clear All</button>
            </div>
            
            <!-- Bugs Table -->
            <div class="table-container">
              <table class="bugs-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Platform</th>
                    <th>Error Type</th>
                    <th>Error Message</th>
                    <th>Job Info</th>
                    <th>Count</th>
                    <th>First Seen</th>
                    <th>Last Seen</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="bugsTableBody">
                  <tr>
                    <td colspan="10" style="text-align: center; padding: 40px; color: #888;">
                      No bugs reported yet. Bugs will appear here automatically during scraping.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div id="bugStatus" class="status-message"></div>
          </div>
        </div>

      </div>

        <!-- Metrics Tab -->
        <div id="metrics-tab" class="tab-pane">
          <div class="metrics-manager">
            <h2>üìä Job Search Metrics & Analytics</h2>
            <p class="help-text">Comprehensive analytics to track your job search progress and optimize your strategy.</p>
            
            <!-- Overall Stats Cards -->
            <div class="metrics-overview">
              <div class="metric-card">
                <div class="metric-icon">üìã</div>
                <div class="metric-info">
                  <div class="metric-value" id="metricTotalJobs">0</div>
                  <div class="metric-label">Total Jobs Found</div>
                </div>
              </div>
              <div class="metric-card">
                <div class="metric-icon">‚úÖ</div>
                <div class="metric-info">
                  <div class="metric-value" id="metricAppliedJobs">0</div>
                  <div class="metric-label">Applied Jobs</div>
                </div>
              </div>
              <div class="metric-card">
                <div class="metric-icon">ü§ñ</div>
                <div class="metric-info">
                  <div class="metric-value" id="metricBotFiltered">0</div>
                  <div class="metric-label">Auto-Filtered</div>
                </div>
              </div>
              <div class="metric-card">
                <div class="metric-icon">üéØ</div>
                <div class="metric-info">
                  <div class="metric-value" id="metricPending">0</div>
                  <div class="metric-label">Pending Review</div>
                </div>
              </div>
              <div class="metric-card">
                <div class="metric-icon">üìà</div>
                <div class="metric-info">
                  <div class="metric-value" id="metricApplyRate">0%</div>
                  <div class="metric-label">Application Rate</div>
                </div>
              </div>
              <div class="metric-card">
                <div class="metric-icon">üí∞</div>
                <div class="metric-info">
                  <div class="metric-value" id="metricAvgSalary">N/A</div>
                  <div class="metric-label">Avg Salary</div>
                </div>
              </div>
            </div>

            <!-- Detailed Analytics Sections -->
            <div class="metrics-grid">
              
              <!-- Platform Breakdown -->
              <div class="metric-section">
                <h3>üìç Jobs by Platform</h3>
                <div class="metric-chart" id="platformChart"></div>
              </div>

              <!-- Job Type Breakdown -->
              <div class="metric-section">
                <h3>üíº Jobs by Type</h3>
                <div class="metric-chart" id="jobTypeChart"></div>
              </div>

              <!-- Industry Breakdown -->
              <div class="metric-section">
                <h3>üè¢ Jobs by Industry</h3>
                <div class="metric-chart" id="industryChart"></div>
              </div>

              <!-- Remote vs Onsite -->
              <div class="metric-section">
                <h3>üåç Remote Status</h3>
                <div class="metric-chart" id="remoteChart"></div>
              </div>

              <!-- Startup vs Established -->
              <div class="metric-section">
                <h3>üöÄ Company Type</h3>
                <div class="metric-chart" id="startupChart"></div>
              </div>

              <!-- Application Timeline -->
              <div class="metric-section">
                <h3>üìÖ Daily Activity</h3>
                <div class="metric-chart" id="timelineChart"></div>
              </div>

              <!-- Salary Distribution -->
              <div class="metric-section">
                <h3>üí∞ Salary Ranges</h3>
                <div class="metric-chart" id="salaryChart"></div>
              </div>

              <!-- Top Technologies -->
              <div class="metric-section">
                <h3>üîß Top Tech Stacks</h3>
                <div class="metric-chart" id="techStackChart"></div>
              </div>

              <!-- Top Companies -->
              <div class="metric-section">
                <h3>üèÜ Top Companies</h3>
                <div class="metric-chart" id="topCompaniesChart"></div>
              </div>

              <!-- Location Breakdown -->
              <div class="metric-section">
                <h3>üìç Top Locations</h3>
                <div class="metric-chart" id="locationChart"></div>
              </div>

              <!-- Filter Effectiveness -->
              <div class="metric-section">
                <h3>üéØ Filter Effectiveness</h3>
                <div class="metric-chart" id="filterChart"></div>
              </div>

              <!-- Weekly Trends -->
              <div class="metric-section metric-section-wide">
                <h3>üìà Weekly Job Discovery Trends</h3>
                <div class="metric-chart" id="weeklyTrendsChart"></div>
              </div>

            </div>

            <div class="metrics-actions">
              <button id="refreshMetricsBtn" class="btn btn-primary">üîÑ Refresh Metrics</button>
              <button id="exportMetricsBtn" class="btn btn-secondary">üì• Export Report</button>
            </div>
          </div>
        </div>

        <!-- Job Apply Tab -->
        <div id="apply-tab" class="tab-pane">
          <div class="apply-viewer">
            <!-- URL Navigation Bar -->
            <div class="apply-header">
              <div class="apply-url-bar">
                <button id="applyBackBtn" class="url-nav-btn" title="Back">‚Üê</button>
                <button id="applyForwardBtn" class="url-nav-btn" title="Forward">‚Üí</button>
                <button id="applyRefreshBtn" class="url-nav-btn" title="Refresh">‚ü≥</button>
                <input 
                  type="text" 
                  id="applyUrlInput" 
                  class="apply-url-input" 
                  placeholder="Enter job application URL and press Enter..."
                />
                <button id="applyGoBtn" class="btn btn-primary btn-sm">Go</button>
              </div>
            </div>

            <!-- Web Content View -->
            <div class="apply-web-section-full">
              <div class="apply-web-header">
                <h3>üåê Application Page</h3>
                <div class="apply-web-controls">
                  <button id="applyZoomOutBtn" class="btn btn-icon" title="Zoom Out">‚àí</button>
                  <span id="applyZoomLevel" class="zoom-level">100%</span>
                  <button id="applyZoomInBtn" class="btn btn-icon" title="Zoom In">+</button>
                  <button id="applyResetZoomBtn" class="btn btn-icon" title="Reset Zoom">‚Ü∫</button>
                </div>
              </div>
              <div id="applyWebviewContainer" class="apply-webview-container">
                <div class="apply-placeholder">
                  <div class="apply-placeholder-icon">üìù</div>
                  <h3>Enter a URL to start</h3>
                  <p>Type a job application URL in the address bar above</p>
                </div>
              </div>
            </div>

            <!-- Status Bar -->
            <div class="apply-status-bar">
              <span id="applyStatus" class="apply-status-text">Ready</span>
              <span id="applyLoadingIndicator" class="apply-loading-indicator" style="display: none;">
                <span class="spinner"></span> Loading...
              </span>
            </div>
          </div>
        </div>

    </div> <!-- End content-wrapper -->
  </div> <!-- End app-container -->

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <!-- Bug Details Modal -->
  <div id="bugDetailsModal" class="modal-overlay" style="display: none;">
    <div class="modal-content bug-modal">
      <div class="modal-header">
        <h3>üêõ Bug Details</h3>
        <button class="modal-close" onclick="closeBugDetailsModal()">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="bug-detail-section">
          <h4>Platform & Type</h4>
          <div class="bug-detail-row">
            <span class="bug-detail-label">Platform:</span>
            <span id="bugDetailPlatform" class="bug-platform"></span>
          </div>
          <div class="bug-detail-row">
            <span class="bug-detail-label">Error Type:</span>
            <span id="bugDetailType" class="bug-error-type"></span>
          </div>
          <div class="bug-detail-row">
            <span class="bug-detail-label">Status:</span>
            <span id="bugDetailStatus" class="bug-status-badge"></span>
          </div>
        </div>

        <div class="bug-detail-section">
          <h4>Error Information</h4>
          <div class="bug-detail-row">
            <span class="bug-detail-label">Error Message:</span>
            <pre id="bugDetailMessage" class="bug-detail-code"></pre>
          </div>
        </div>

        <div class="bug-detail-section">
          <h4>Stack Trace</h4>
          <pre id="bugDetailStack" class="bug-detail-code"></pre>
        </div>

        <div class="bug-detail-section">
          <h4>Context</h4>
          <div class="bug-detail-row">
            <span class="bug-detail-label">URL:</span>
            <a id="bugDetailUrl" href="#" target="_blank" class="bug-detail-link"></a>
          </div>
          <div class="bug-detail-row">
            <span class="bug-detail-label">Job Company:</span>
            <span id="bugDetailCompany"></span>
          </div>
          <div class="bug-detail-row">
            <span class="bug-detail-label">Job Title:</span>
            <span id="bugDetailTitle"></span>
          </div>
        </div>

        <div class="bug-detail-section">
          <h4>Occurrence Stats</h4>
          <div class="bug-detail-row">
            <span class="bug-detail-label">Count:</span>
            <span id="bugDetailCount" class="bug-count"></span>
          </div>
          <div class="bug-detail-row">
            <span class="bug-detail-label">First Seen:</span>
            <span id="bugDetailFirstSeen" class="bug-date"></span>
          </div>
          <div class="bug-detail-row">
            <span class="bug-detail-label">Last Seen:</span>
            <span id="bugDetailLastSeen" class="bug-date"></span>
          </div>
        </div>

        <div class="bug-detail-section" id="bugDetailNotesSection">
          <h4>Notes</h4>
          <textarea id="bugDetailNotes" class="form-control" rows="3" placeholder="Add notes about this bug..."></textarea>
          <button id="saveBugNotesBtn" class="btn btn-primary" style="margin-top: 10px;">üíæ Save Notes</button>
        </div>
      </div>
      <div class="modal-footer">
        <button id="copyBugDetailsBtn" class="btn btn-secondary">üìã Copy Details</button>
        <button class="btn btn-secondary" onclick="closeBugDetailsModal()">Close</button>
      </div>
    </div>
  </div>


  <!-- Resume Work Experience Modal -->
  <div id="resumeExpModal" class="modal-overlay" style="display: none;">
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header">
        <h3>üíº Work Experience for <span id="resumeExpModalTitle"></span></h3>
        <button class="modal-close" onclick="closeResumeExpModal()">‚úï</button>
      </div>
      <div class="modal-body">
        <!-- Add Work Experience Form -->
        <div class="work-exp-form">
          <div class="form-grid">
            <div class="form-group">
              <label>Company *</label>
              <input type="text" id="expCompany" class="form-control" placeholder="e.g., ABC Corp">
            </div>
            <div class="form-group">
              <label>Position *</label>
              <input type="text" id="expPosition" class="form-control" placeholder="e.g., Senior Developer">
            </div>
            <div class="form-group">
              <label>Start Date *</label>
              <input type="month" id="expStartDate" class="form-control">
            </div>
            <div class="form-group">
              <label>End Date</label>
              <input type="month" id="expEndDate" class="form-control">
              <label class="checkbox-label" style="margin-top: 5px;">
                <input type="checkbox" id="expIsCurrent">
                <span>Currently working here</span>
              </label>
            </div>
            <div class="form-group full-width">
              <label>Description/Achievements</label>
              <textarea id="expDescription" class="form-control" rows="3" placeholder="Key responsibilities and achievements..."></textarea>
            </div>
          </div>
          <button id="addExpToResumeBtn" class="btn btn-success" style="margin-top: 10px;">‚ûï Add Experience</button>
        </div>

        <!-- Experiences List -->
        <div class="resume-experiences-list" style="margin-top: 20px;">
          <h4>Experiences for this Resume</h4>
          <div id="resumeExpList"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" onclick="closeResumeExpModal()">Done</button>
      </div>
    </div>
  </div>

  <!-- Education Edit Modal -->
  <div id="educationModal" class="modal-overlay" style="display: none;">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <h3>üìö Edit Education</h3>
        <button class="btn-icon" id="closeEducationModal">‚úñ</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editEducationId">
        <input type="hidden" id="editEducationIndex">
        
        <div class="form-group">
          <label for="editEduSchool">School Name *</label>
          <input type="text" id="editEduSchool" class="form-control" placeholder="e.g., MIT">
        </div>
        
        <div class="form-group">
          <label for="editEduDegree">Degree *</label>
          <input type="text" id="editEduDegree" class="form-control" placeholder="e.g., Bachelor of Science">
        </div>
        
        <div class="form-group">
          <label for="editEduField">Field of Study</label>
          <input type="text" id="editEduField" class="form-control" placeholder="e.g., Computer Science">
        </div>
        
        <div class="form-group">
          <label for="editEduLocation">Location</label>
          <input type="text" id="editEduLocation" class="form-control" placeholder="e.g., Boston, MA">
        </div>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="editEduStartDate">Start Date</label>
            <input type="text" id="editEduStartDate" class="form-control" placeholder="e.g., Sep 2018">
          </div>
          
          <div class="form-group">
            <label for="editEduEndDate">End Date</label>
            <input type="text" id="editEduEndDate" class="form-control" placeholder="e.g., May 2022">
          </div>
        </div>
        
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="editEduIsCurrent">
            <span>Currently Attending</span>
          </label>
        </div>
        
        <div class="form-group">
          <label for="editEduGpa">GPA</label>
          <input type="text" id="editEduGpa" class="form-control" placeholder="e.g., 3.8">
        </div>
        
        <div class="form-group">
          <label for="editEduDescription">Description (Optional)</label>
          <textarea id="editEduDescription" class="form-textarea" rows="3" placeholder="Relevant coursework, achievements, honors..."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelEducationEdit">Cancel</button>
        <button class="btn btn-primary" id="saveEducationEdit">üíæ Save</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>

